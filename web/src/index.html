<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        #frames:before {
            content: "";
            z-index: 1;
            top: 0;
            left: 0;
            position: absolute;
            pointer-events: none;
            height: 100%;
            width: 100%;
            background: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 00) 75%, rgba(255, 255, 255, 0.95) 90%, rgba(255, 255, 255, 1) 100%);
            background-attachment: fixed;
        }

        #frames {
            transition: 1s;
            min-height: 200px;
        }

        .card {
            transition: 1s, background-color 2s;
        }

        @starting-style {
            .card {
                opacity: 0;
                transform: translateX(-100%)
            }
        }

        .leaflet-container img.leaflet-tile {
            mix-blend-mode: normal !important;

        }
    </style>
</head>

<body>
    <header>

    </header>

    <!-- Begin page content -->
    <main role="main" class="container gap-4 d-grid ">
        <div>
            <div class="row justify-content-center">
                <h1 class="mt-5">webhorus
                </h1>
                <div class="row mt-3">
                    <div class="col-auto mb-2">
                        <button id="audio_start" class="btn btn-primary" onclick="startAudio()"
                            disabled="true">Loading</button>
                    </div>

                </div>
                <div class="row mt-3 mb-3">
                    <div class="col mb-2">
                        <div class="progress position-relative">
                            <div id="dbfs" class="progress-bar" role="progressbar" style="width: 0%;">
                                <span id="dbfstext" class="justify-content-center d-flex position-absolute w-100">-999
                                    dBFS</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion">
                    <div class="accordion-item" id="configMain">
                        <div class="accordion-header" id="configCard">
                            <button class="accordion-button" data-bs-toggle="collapse" data-bs-target="#collapseConfig">
                                <b>Config</b>
                            </button>
                        </div>
                        <div id="collapseConfig" class="collapse show ">
                            <div class="accordion-body">
                                <div class="row align-items-center  ">
                                    <div class="col-md-4">
                                        <div class="col mb-2">
                                            <label class="form-label col-form-label" for="sound_adapter">Sound
                                                input</label>
                                            <select class="form-control form-select" id="sound_adapter"
                                                onchange="snd_change()" placeholder="" disabled>
                                                <option value="placeholder" selected id="snd_ph">Click start first
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col mb-2">
                                            <label class="form-label col-form-label" for="callsign">Uploader
                                                Callsign</label>
                                            <input class="form-control" id="callsign" placeholder="" value="N0CALL"
                                                onchange="saveSettings()">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col mb-2">
                                            <label class="form-label col-form-label" for="uploader_radio">Uploader
                                                Radio</label>
                                            <input class="form-control" id="uploader_radio" placeholder=""
                                                onchange="saveSettings()">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col mb-2">
                                            <label class="form-label col-form-label" for="uploader_antenna">Uploader
                                                Antenna</label>
                                            <input class="form-control" id="uploader_antenna" placeholder=""
                                                onchange="saveSettings()">
                                        </div>
                                    </div>


                                    <div class="col-md-4">
                                        <div class="col mb-2">
                                            <label class="form-label col-form-label" for="uploader_lat">Uploader
                                                Latitude</label>
                                            <div class="input-group">
                                                <input class="form-control" id="uploader_lat" placeholder=""
                                                    onchange="saveSettings()" type="number" inputmode="decimal">
                                                <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                                    data-bs-target="#mapPickerModal" style="padding-top: 0.5px;">
                                                    &target;
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col mb-2">
                                            <label class="form-label col-form-label" for="uploader_lon">Uploader
                                                Longitude</label>
                                            <div class="input-group">
                                                <input class="form-control" id="uploader_lon" placeholder=""
                                                    onchange="saveSettings()" type="number" inputmode="decimal">
                                                <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                                    data-bs-target="#mapPickerModal" style="padding-top: 0.5px;">
                                                    &target;
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col mb-2">
                                            <label class="form-label col-form-label" for="uploader_alt">Uploader
                                                Altitude</label>
                                            <input class="form-control" id="uploader_alt" placeholder=""
                                                onchange="saveSettings()" type="number" inputmode="decimal" value="0">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="col mb-2">
                                            <label class="form-label col-form-label" for="dial">Dial Frequency
                                                (MHz)</label>
                                            <input class="form-control" id="dial" placeholder=""
                                                onchange="saveSettings()" type="number" inputmode="decimal">
                                        </div>
                                    </div>
                                    <div class="row align-middle">
                                        <div class="col mb-2">


                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" checked
                                                    id="upload_sondehub" onclick="saveSettings()"
                                                    onchange="saveSettings()">
                                                <label class="form-check-label " for="upload_sondehub">Upload to
                                                    SondeHub</label>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="row align-middle">
                                        <div class="col mb-2">


                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="uploader_position"
                                                    onclick="saveSettings()" onchange="saveSettings()">
                                                <label class="form-check-label " for="uploader_position">Upload station
                                                    position</label>

                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row g-3" style="position:relative;max-width: 85vw;">
            <h2>Frames</h2>
            <div id="frames" style="white-space:nowrap;overflow-x: auto;scrollbar-width: none;">
            </div>
        </div>
        <div class="row g-3">
            <h2>Map</h2>
            <div id="trackMap" style="height: 500px">
            </div>
        </div>
        <div class="row g-3">
            <h2>Spectrum</h2>
            <div>
                <canvas id="canvas" width="1024" height="576" ></canvas>
            </div>
        </div>
        <div class="row g-3">
            <h2>SNR</h2>
            <div id="snr" width="80%">
            </div>
        </div>
        <div class="row g-3">
            <h2>Plots</h2>
            <div id="plots" width="80%">
            </div>
        </div>

        <div class="row g-3">
            <h2>RX Log</h2>
            <p>Logs!</p>
            <div id="rx_log">

            </div>
        </div>



    </main>

    <div class="modal fade" id="mapPickerModal" tabindex="-1" aria-labelledby="mapPickerModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="mapPickerModalLabel">Select location</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="location_picker" style="width:auto;height: 400px">

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="saveLocation()">Save
                        changes</button>
                </div>
            </div>
        </div>
    </div>


    <footer class="footer">
        <div class="container">
            <span class="text-muted"></span>
        </div>
    </footer>
    <script type="module" src="./js/main.js"></script>
</body>

</html>